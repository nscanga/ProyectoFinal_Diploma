<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Details - Distribuidora Los Amigos</title>
    <link rel="stylesheet" href="../../css/styles.css">
</head>
<body>

    <div class="breadcrumb">
        <a href="../general/topic_20_main.html">Home</a>
        <span>¬ª</span>
        <a href="#">Order Management</a>
        <span>¬ª</span>
        <span>Order Details</span>
    </div>

    <h1>Order Details</h1>

    <section id="introduccion">
        <h2>Introduction</h2>
        <p>
            This view shows the products included in a specific order along with quantities, unit prices and subtotals. The header area summarises the customer, creation date and current status. When the order is delivered you can also generate a PDF receipt.
        </p>
        <p>
            Open it to verify the preparation of an order, answer customer inquiries or export a delivery confirmation.
        </p>
    </section>

    <section id="acceso">
        <h2>How to Access</h2>
        <p>To access this feature:</p>
        <ol>
            <li>Go to <strong>Orders ‚Üí View orders</strong>.</li>
            <li>Select an order and click <strong>üëÅÔ∏è View Details</strong>.</li>
            <li>The <strong>ShowOrderDetailsForm</strong> opens with the selected order.</li>
        </ol>
    </section>

    <section id="campos">
        <h2>Main Components</h2>
        <table>
            <thead>
                <tr>
                    <th>Element</th>
                    <th>Description</th>
                    <th>Required</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Details grid</strong> (dataGridViewDetallePedido)</td>
                    <td>Displays Product, Quantity, Unit Price and Subtotal columns. Rows are read-only.</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td><strong>Customer</strong> (textBoxCliente)</td>
                    <td>Customer name obtained from the order.</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td><strong>Date</strong> (textBoxFecha)</td>
                    <td>Order date formatted as <code>dd/MM/yyyy</code>.</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td><strong>Status</strong> (textBoxEstado)</td>
                    <td>Current status description provided by <code>PedidoService.ObtenerNombreEstadoPorId</code>.</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td><strong>üìÑ Generate PDF</strong></td>
                    <td>Button dynamically added when the order status is <em>Delivered</em>. Creates a PDF receipt using <code>PdfService</code>.</td>
                    <td>No</td>
                </tr>
                <tr>
                    <td><strong>Close</strong></td>
                    <td>Returns to the order list.</td>
                    <td>No</td>
                </tr>
            </tbody>
        </table>
    </section>

    <section id="procedimiento">
        <h2>Procedure</h2>

        <div class="step">
            <span class="step-number">1</span>
            <strong>Review the header</strong>
            <p>Check the customer, date and status to confirm you are analysing the correct order.</p>
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>Inspect the products</strong>
            <p>Read the grid to confirm each product, quantity and amount before dispatching or closing the order.</p>
        </div>

        <div class="step">
            <span class="step-number">3</span>
            <strong>Generate the PDF (if available)</strong>
            <p>When the order is <em>Delivered</em>, click <strong>üìÑ Generate PDF</strong>, choose the destination folder and open the file if needed.</p>
        </div>

        <div class="step">
            <span class="step-number">4</span>
            <strong>Close the window</strong>
            <p>Click <strong>Close</strong> to return to the order list.</p>
        </div>
    </section>

    <section id="validaciones">
        <h2>System Validations</h2>
        <p>The form applies these validations:</p>
        <ul>
            <li>If the order cannot be loaded, an error message is displayed.</li>
            <li>The PDF button only appears when the order status equals <em>Delivered</em>.</li>
            <li>During PDF generation the application asks for the destination path and offers to open the resulting file.</li>
            <li>The grid is configured as read-only to prevent unintended edits.</li>
        </ul>
    </section>

    <section id="consejos">
        <h2>Tips and Recommendations</h2>

        <div class="tip">
            Compare the detail grid with the packing list to ensure the shipment is complete.</div>

        <div class="tip">
            Store the generated PDFs in a shared folder for quick access by logistics and accounting teams.</div>

        <div class="warning">
            <strong>‚ö†Ô∏è Warning:</strong> To adjust quantities or products, return to <em>Edit Order</em>; this view is informational only.</div>
    </section>

    <section id="errores">
        <h2>Common Errors and Solutions</h2>

        <h3>Error: "Error generating PDF"</h3>
        <div class="error">
            <strong>Cause:</strong> The selected path is not accessible or a file with the same name is in use.</div>
        <div class="success">
            <strong>‚úÖ Fix:</strong> Choose a writable folder and ensure the file is not open before retrying.</div>

        <h3>Error: "The order could not be loaded."</h3>
        <div class="error">
            <strong>Cause:</strong> The order was removed or the form was opened without a valid selection.</div>
        <div class="success">
            <strong>‚úÖ Fix:</strong> Close the window, refresh the order list and select the record again.</div>
    </section>

    <section id="permisos">
        <h2>Required Permissions</h2>
        <p>Access to this view requires:</p>
        <ul>
            <li><code>MOSTRAR_PEDIDOS</code> ‚Äì Grants access to the order list and allows opening the detail view.</li>
        </ul>

        <div class="warning">
            <strong>‚ö†Ô∏è Important:</strong> If the PDF button is missing, verify that the order status is <em>Delivered</em> or contact the administrator.</div>
    </section>

    <section id="relacionados">
        <h2>See Also</h2>
        <ul class="no-bullets">
            <li>üìÑ <a href="topic_80_crear_pedido.html">Create order</a></li>
            <li>üìÑ <a href="topic_81_modificar_pedido.html">Edit order</a></li>
            <li>üìÑ <a href="topic_82_mostrar_pedidos.html">View orders</a></li>
        </ul>
    </section>

    <footer>
        <p>¬© 2024 Distribuidora Los Amigos - Management System</p>
        <p>All rights reserved</p>
    </footer>

</body>
</html>
